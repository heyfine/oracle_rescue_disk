# ğŸš’ ç”²éª¨æ–‡äº‘ ARM (Ampere) å®ä¾‹æ‰“é€ â€œä¸æ­»ä¹‹èº«â€ï¼šNetboot.xyz æ•‘æ´æ¨¡å¼å…¨æ”»ç•¥

## å‰è¨€
ç”²éª¨æ–‡äº‘ï¼ˆOCIï¼‰çš„ ARM æœºå™¨æ€§èƒ½å¼ºåŠ²ï¼Œä½†ä¸€æ—¦ç©æŒ‚ï¼ˆå¦‚ SSH å¤±è”ã€é˜²ç«å¢™é…ç½®é”™è¯¯ï¼‰ï¼Œé‡è£…ç³»ç»Ÿéå¸¸éº»çƒ¦ã€‚ä¼ ç»Ÿçš„ mfslinux å¹¶ä¸æ”¯æŒ ARM æ¶æ„ã€‚æœ¬æ–‡å°†æ•™ä½ å¦‚ä½•åˆ©ç”¨ Netboot.xyz (ARM64) å’Œ **ç§»èŠ±æ¥æœ¨æ³•**ï¼Œç»™ä½ çš„ ARM å®ä¾‹å®‰è£…ä¸€ä¸ªæ°¸ä¹…çš„æ•‘æ´æ¨¡å¼ã€‚æ— è®ºç³»ç»Ÿæ€ä¹ˆæŒ‚ï¼Œéƒ½èƒ½é€šè¿‡äº‘æ§åˆ¶å°æ•‘å›æ¥ï¼

---

## ğŸ› ï¸ å‡†å¤‡å·¥ä½œ
- **ç›®æ ‡æœºå™¨**ï¼šä¸€å°ç”²éª¨æ–‡ ARM å®ä¾‹ï¼ˆç³»ç»Ÿç›˜é»˜è®¤ 47Gï¼‰ã€‚
- **è¾…åŠ©æœºå™¨**ï¼šåŒä¸€å¯ç”¨åŒºï¼ˆADï¼‰ä¸‹çš„ä»»æ„å¦ä¸€å°æœºå™¨ï¼ˆAMD æˆ– ARM å‡å¯ï¼Œæ¨è AMD å…è´¹æœºï¼‰ã€‚
- **èƒ†å¤§å¿ƒç»†**ï¼šæ¶‰åŠç£ç›˜åˆ†åŒºæ“ä½œï¼Œå»ºè®®å…ˆå¤‡ä»½é‡è¦æ•°æ®ã€‚

---

## âœ‚ï¸ ç¬¬ä¸€æ­¥ï¼šç§»èŠ±æ¥æœ¨ï¼ˆæŒ‚è½½ç£ç›˜ï¼‰
ç”±äºæ— æ³•åœ¨è¿è¡Œçš„ç³»ç»Ÿä¸Šä¿®æ”¹æ ¹åˆ†åŒºï¼Œæˆ‘ä»¬éœ€è¦æŠŠç£ç›˜æ‹†ä¸‹æ¥æ“ä½œã€‚

1. **åœæ­¢å®ä¾‹**ï¼šåœ¨ OCI åå°åœæ­¢ä½ çš„ ARM ç›®æ ‡æœºã€‚
2. **åˆ†ç¦»å¼•å¯¼å·**ï¼šè¿›å…¥â€œå¼•å¯¼å·â€ (Boot Volumes)ï¼Œæ‰¾åˆ°è¯¥ç£ç›˜ï¼Œç‚¹å‡»â€œåˆ†ç¦»â€ (Detach)ã€‚
3. **æŒ‚è½½åˆ°è¾…åŠ©æœº**ï¼š
   - æ‰¾åˆ°è¾…åŠ©æœºï¼Œå‘ä¸‹æ»šåŠ¨åˆ°â€œé™„åŠ çš„å—å­˜å‚¨å·â€ (Attached block volumes)ã€‚
   - ç‚¹å‡»â€œé™„åŠ â€ï¼Œé€‰æ‹©åˆšæ‰åˆ†ç¦»çš„ ARM å¼•å¯¼å·ã€‚
   - **é‡ç‚¹**ï¼šæŒ‚è½½ç±»å‹é€‰æ‹© **åŠè™šæ‹ŸåŒ– (Paravirtualized)**ï¼Œè®¿é—®ç±»å‹é€‰æ‹© **è¯»/å†™**ã€‚
4. **ç¡®è®¤æŒ‚è½½**ï¼šSSH ç™»å½•è¾…åŠ©æœºï¼Œè¾“å…¥ `lsblk`ï¼Œç¡®è®¤çœ‹åˆ°ä¸€ä¸ªæ–°çš„ 47G ç£ç›˜ï¼ˆå‡è®¾ä¸º `/dev/sdb`ï¼‰ã€‚

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šé‡æ–°åˆ†åŒºï¼ˆä¸‰å®¤ä¸€å…ï¼‰
æˆ‘ä»¬å°† 47G çš„å¤§ç£ç›˜åˆ‡åˆ†ä¸ºï¼š**ç³»ç»Ÿç›˜ (15G) + æ•‘æ´ç›˜ (200M) + æ•°æ®ç›˜ (å‰©ä½™)**ã€‚

åœ¨è¾…åŠ©æœº SSH ä¸­æ‰§è¡Œï¼š

```bash
# 1. ä¿®å¤å¹¶ç¼©å®¹æ–‡ä»¶ç³»ç»Ÿ (å‡è®¾ sdb1 ä¸ºåŸç³»ç»Ÿåˆ†åŒº)
e2fsck -f /dev/sdb1
resize2fs /dev/sdb1 15G

# 2. ä¿®æ”¹åˆ†åŒºè¡¨
fdisk /dev/sdb
```

**Fdisk äº¤äº’æ“ä½œé€ŸæŸ¥ï¼š**
- `d` -> `1`ï¼šåˆ é™¤åŸç³»ç»Ÿåˆ†åŒºã€‚
- `n` -> `1` -> `å›è½¦` -> `+15G`ï¼šæ–°å»ºç³»ç»Ÿåˆ†åŒºï¼ˆç§»é™¤ç­¾åé€‰ Noï¼ï¼‰ã€‚
- `n` -> `2` -> `å›è½¦` -> `+200M`ï¼šæ–°å»ºæ•‘æ´åˆ†åŒºã€‚
- `n` -> `3` -> `å›è½¦` -> `å›è½¦`ï¼šæ–°å»ºæ•°æ®åˆ†åŒºã€‚
- `w`ï¼šä¿å­˜é€€å‡ºã€‚

**3. æ ¼å¼åŒ–æ–°åˆ†åŒºï¼š**

```bash
# åˆ·æ–°ç³»ç»Ÿåˆ†åŒºå¤§å°
resize2fs /dev/sdb1

# æ ¼å¼åŒ–æ•‘æ´åˆ†åŒº (sdb2)
mkfs.ext4 /dev/sdb2 -L RESCUE

# æ ¼å¼åŒ–æ•°æ®åˆ†åŒº (sdb3, æ¨è Btrfs)
mkfs.btrfs /dev/sdb3 -L DATA
```

---

## ğŸ“¥ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² ARM ç‰ˆæ•‘æ´å¼¹è¯
æˆ‘ä»¬å°† Netboot.xyz (ARM64 EFI) æ”¾å…¥æ•‘æ´åˆ†åŒºã€‚

```bash
# 1. æŒ‚è½½æ•‘æ´åˆ†åŒº
mkdir -p /mnt/rescue
mount /dev/sdb2 /mnt/rescue
cd /mnt/rescue

# 2. ä¸‹è½½ EFI æ–‡ä»¶
wget https://boot.netboot.xyz/ipxe/netboot.xyz-arm64.efi

# 3. è·å– UUID (å¤åˆ¶ä¸‹æ¥ï¼)
blkid /dev/sdb2
# è¾“å‡ºç¤ºä¾‹: UUID="c81e0126-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
```

---

## âš™ï¸ ç¬¬å››æ­¥ï¼šé…ç½® GRUB å¯åŠ¨èœå•
è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦æŒ‚è½½åŸç³»ç»Ÿç›˜ä¿®æ”¹é…ç½®ã€‚

```bash
# 1. æŒ‚è½½åŸç³»ç»Ÿç›˜
mkdir -p /mnt/sys_root
mount /dev/sdb1 /mnt/sys_root

# 2. å†™å…¥æ•‘æ´èœå•
# âš ï¸ è¯·å°†ä¸‹é¢ YOUR_UUID_HERE æ›¿æ¢ä¸ºä¸Šä¸€æ­¥è·å–çš„çœŸå® UUID
cat <<'EOF' >> /mnt/sys_root/etc/grub.d/40_custom

menuentry "ğŸš‘ Rescue System (Netboot.xyz ARM)" {
    insmod part_gpt
    insmod ext2
    insmod chain
    search --no-floppy --fs-uuid --set=root YOUR_UUID_HERE
    chainloader /netboot.xyz-arm64.efi
}
EOF

# 3. å¼ºåˆ¶å¼€å¯ä¸²å£æ˜¾ç¤º & è®¾ç½® 5 ç§’å€’è®¡æ—¶
cat <<EOF > /mnt/sys_root/etc/default/grub.d/99-oci-arm.cfg
GRUB_TERMINAL="console serial"
GRUB_SERIAL_COMMAND="serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1"
GRUB_TIMEOUT=5
GRUB_TIMEOUT_STYLE=menu
EOF
```

---

## ğŸª„ ç¬¬äº”æ­¥ï¼šè·¨æ¶æ„ Chroot (QEMU å¤§æ³•)
å¦‚æœä½ æ˜¯ç”¨ AMD è¾…åŠ©æœºä¿® ARM ç¡¬ç›˜ï¼Œç›´æ¥ chroot ä¼šæŠ¥é”™ `Exec format error`ã€‚éœ€è¦å®‰è£…æ¨¡æ‹Ÿå™¨ã€‚

```bash
# 1. å®‰è£… QEMU é™æ€æ¨¡æ‹Ÿå™¨ (åœ¨è¾…åŠ©æœºä¸Š)
apt-get update
apt-get install -y qemu-user-static binfmt-support

# 2. æ‹·è´æ¨¡æ‹Ÿå™¨åˆ°ç›®æ ‡ç›˜
cp /usr/bin/qemu-aarch64-static /mnt/sys_root/usr/bin/

# 3. æŒ‚è½½ç³»ç»Ÿç›®å½•
mount --bind /dev /mnt/sys_root/dev
mount --bind /proc /mnt/sys_root/proc
mount --bind /sys /mnt/sys_root/sys

# 4. è¿›å…¥ ARM ç³»ç»Ÿç¯å¢ƒ
chroot /mnt/sys_root

# --- ä»¥ä¸‹å‘½ä»¤åœ¨ chroot å†…éƒ¨æ‰§è¡Œ ---
update-grub
exit
# --- é€€å‡º chroot ---

# 5. å¸è½½æ‰€æœ‰åˆ†åŒº
umount -R /mnt/sys_root
umount /mnt/rescue
```

---

## ğŸš€ ç¬¬å…­æ­¥ï¼šå½’ä½ä¸æµ‹è¯•
1. åœ¨ OCI åå°å°†ç£ç›˜ä»è¾…åŠ©æœºåˆ†ç¦»ã€‚
2. å›åˆ° ARM åŸæœºï¼Œç‚¹å‡»â€œå¼•å¯¼å·â€ -> â€œé™„åŠ å¼•å¯¼å·â€ï¼ˆå¿…é¡»ä½œä¸º Boot Volumeï¼‰ã€‚
3. å¯åŠ¨å®ä¾‹ï¼Œå¹¶è¿…é€Ÿæ‰“å¼€ **â€œæ§åˆ¶å°è¿æ¥â€ -> â€œå¯åŠ¨ Cloud Shell è¿æ¥â€**ã€‚
4. ä½ åº”è¯¥èƒ½çœ‹åˆ° GRUB èœå•ï¼Œé€‰æ‹© **ğŸš‘ Rescue System**ã€‚
5. è¿›å…¥ Netboot.xyz åï¼Œé€‰æ‹© **Linux Network Installs -> Alpine Linux** å³å¯è¿›å…¥å†…å­˜æ•‘æ´ç³»ç»Ÿï¼

---

## ğŸ’¡ æ•‘æ´å°è´´å£«
è¿›å…¥ Alpine Linux æ•‘æ´æ¨¡å¼åï¼Œç³»ç»Ÿæ˜¯è¿è¡Œåœ¨å†…å­˜é‡Œçš„ã€‚
- **é»˜è®¤ç”¨æˆ·å**ï¼š`root` (æ— å¯†ç )
- **å®‰è£…å·¥å…·**ï¼š`apk update && apk add e2fsck resize2fs fdisk`
- **æŒ‚è½½æ•°æ®ç›˜**ï¼š`mount /dev/sda3 /mnt`

---
